commit-msg:
  jobs:
    - run: npx commitlint --edit {1}

pre-commit:
  parallel: false
  piped: true
  jobs:
    # Pressing Enter twice is required to continue because of `piped: true`
    - run: npm run confirm-es5-tested -- --message "Please press Enter again."
      use_stdin: true
      interactive: true
      glob:
        - "src/*.ts"
        - "src/**/*.ts"
        - "rollup.config.*.mjs"
      exclude:
        - "src/*.spec.ts"
        - "src/**/*.spec.ts"
    - group:
        parallel: true
        jobs:
          - run: npm run spellcheck -- {staged_files}
          - run: npm run stylecheck -- --no-errors-on-unmatched --write {staged_files}
            stage_fixed: true
          - run: npm run typecheck
          - run: npm run test
